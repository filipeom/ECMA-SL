function _objSimple(): { type: "A", foo: number } | { type: "B", foo: string } {
	return { type: "A", foo: 10 }
};

function _objComplex(): { foo: { bar : number } } | { foo: { bar : string } } {
	return { foo: { bar: 10 } }
};

function main() {
	objSimple : { type: "A", foo: number } | { type: "B", foo: string } := _objSimple();
	objComplex : { foo: { bar : number } } | { foo: { bar : string } } := _objComplex();
	x: number := objSimple.foo;						/* BadValue: number <- string */
	y: string := objSimple.foo;						/* BadValue: string <- number */

	if (typeof(objSimple.foo) = __$Int) {
		x: number := objSimple.foo;					/* Valid */
		y: string := objSimple.foo					/* BadValue: string <- number */
	} else {
		x: number := objSimple.foo;					/* BadValue: number <- string */
		y: string := objSimple.foo					/* BadValue: string <- number */
	};

	if (objSimple.type = "A") {
		x: number := objSimple.foo;					/* Valid */
		y: string := objSimple.foo					/* BadValue: string <- number */
	} else {
		x: number := objSimple.foo;					/* BadValue: number <- string */
		y: string := objSimple.foo					/* Valid */
	};

	if (typeof (objComplex.foo.bar) = __$Str) {
		x: number := objComplex.foo.bar;		/* BadValue: number <- string */
		y: string := objComplex.foo.bar			/* Valid */
	};

	return 0
}